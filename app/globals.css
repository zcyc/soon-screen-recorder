@import "tailwindcss";
/*
  ---break---
*/
@custom-variant dark (&:is(.dark *));

@import "tw-animate-css";

@variant dark (&:is(.dark *));

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@layer utilities {
  body {
    font-family: "Manrope", Arial, Helvetica, sans-serif;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Prevent layout shift */
  .prevent-layout-shift {
    min-width: 0;
    width: 100%;
    max-width: 100%;
  }
  

  
  /* Stabilize header user menu area */
  .header-user-menu {
    min-width: 180px;
    height: 2.25rem; /* 36px - consistent height */
    display: flex;
    align-items: center;
    gap: 1rem;
    justify-content: flex-end;
  }
  
  /* Header stability */
  header {
    min-height: 4rem; /* 64px - ensure consistent header height */
  }
  
  /* Stable content container - no animations to prevent jumps */
  .content-container {
    opacity: 1;
    /* Hardware acceleration for smoother rendering */
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-transform: translateZ(0);
  }
}

/* Prevent FOUC and optimize theme transitions */
@layer base {
  /* Ensure stable initial rendering */
  html {
    /* Always show content - rely on proper SSR theme detection instead of hiding */
    visibility: visible;
  }
  
  /* Optimized theme transitions - only for specific properties */
  * {
    transition-property: color, background-color, border-color;
    transition-duration: 150ms;
    transition-timing-function: cubic-bezier(0.2, 0, 0.2, 1);
  }
  
  /* No transitions during initial load to prevent flash */
  html:not([data-hydrated]) * {
    transition: none !important;
  }
  
  /* Override for specific elements that shouldn't transition */
  input, textarea, select, button:active {
    transition: none;
  }
  
  /* Stable rendering during theme changes */
  body {
    /* Prevent flash by maintaining consistent background immediately */
    transition: background-color 100ms ease-out;
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 142 76% 36%; /* Default green theme */
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 10% 3.9%;
    --radius: 0.6rem;
    
    /* Preload dark theme variables for instant switching */
    --dark-background: 240 10% 3.9%;
    --dark-foreground: 0 0% 98%;
    --dark-card: 240 10% 3.9%;
    --dark-border: 240 3.7% 15.9%;
  }

  .dark {
    --background: var(--dark-background);
    --foreground: var(--dark-foreground);
    --card: var(--dark-card);
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 142 76% 36%; /* Fixed green theme color for dark mode */
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: var(--dark-border);
    --input: 240 3.7% 15.9%;
    --ring: 240 5% 64.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    /* Improve font rendering and layout stability */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  /* Prevent layout shifts during content loading */
  html {
    overflow-x: hidden;
    /* Always reserve space for scrollbar to prevent jumping */
    overflow-y: scroll !important;
    scrollbar-gutter: stable both-edges;
  }
  
  body {
    overflow-x: hidden;
    /* Prevent horizontal scrolling that causes jumping */
    width: 100vw;
    max-width: 100%;
  }
  
  /* Ensure consistent box sizing */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  
  /* Prevent layout shifting by ensuring consistent container behavior */
  .max-w-7xl {
    width: 100%;
    max-width: 80rem;
    margin-left: auto;
    margin-right: auto;
    /* Avoid containment as it can cause issues */
    transform: translateZ(0); /* Hardware acceleration instead */
    /* Ensure stable width calculation */
    box-sizing: border-box;
  }
  
  /* Stable page container to prevent jumping */
  #__next, [id="root"] {
    width: 100%;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }
  
  /* Stabilize main content area */
  main {
    contain: layout;
    min-height: calc(100vh - 4rem); /* Account for header height */
  }
  
  /* Prevent page jumping for select dropdowns */
  [data-radix-select-trigger] {
    transform: translateZ(0);
    will-change: auto;
    contain: layout;
  }
  
  [data-radix-select-content] {
    transform: translateZ(0);
    will-change: auto;
    contain: layout;
    /* Ensure dropdown doesn't cause page shifts */
    position: fixed !important;
  }
  
  /* Ensure body doesn't jump when content changes */
  body {
    min-height: 100vh;
  }
  
  /* Ensure select containers don't cause layout shifts */
  .select-container {
    contain: layout;
    min-height: 2.5rem; /* 40px - consistent with SelectTrigger */
  }
}